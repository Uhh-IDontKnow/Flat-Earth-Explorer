<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Flat Earth Explorer</title>
<link rel="preconnect" href="https://fonts.googleapis.com"/>
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;1,9..40,300&family=Syne:wght@600;700;800&display=swap" rel="stylesheet"/>
<link rel="stylesheet" href="style.css"/>
</head>
<body>

<!-- LOADING SCREEN -->
<div id="loader">
  <div class="loader-content">
    <div class="loader-disc-wrap">
      <div class="loader-disc">
        <div class="disc-ring r1"></div>
        <div class="disc-ring r2"></div>
        <div class="disc-ring r3"></div>
        <div class="disc-core"></div>
      </div>
    </div>
    <h1 class="loader-title">Flat Earth<br/><span>Explorer</span></h1>
    <p class="loader-sub">Your world. Reimagined.</p>
    <div class="loader-progress">
      <div class="loader-progress-fill" id="loaderFill"></div>
    </div>
    <p class="loader-status" id="loaderStatus">Initialising flat projection‚Ä¶</p>
  </div>
</div>

<!-- CANVAS -->
<canvas id="glCanvas"></canvas>

<!-- TOP SEARCH BAR ‚Äî floating pill -->
<div id="searchBar">
  <button id="menuBtn" class="icon-btn" title="Menu">
    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
      <line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="18" x2="21" y2="18"/>
    </svg>
  </button>
  <div class="search-divider-v"></div>
  <input type="text" id="searchInput" placeholder="Search Flat Earth‚Ä¶" autocomplete="off" spellcheck="false"/>
  <button id="searchBtn" class="icon-btn search-go" title="Search">
    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round">
      <circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/>
    </svg>
  </button>
  <div id="searchResults"></div>
</div>

<!-- SIDE PANEL -->
<div id="sidePanel" class="panel-closed">
  <div class="panel-header">
    <div class="panel-logo">
      <div class="panel-logo-icon">üåç</div>
      <div>
        <div class="panel-logo-title">Flat Earth Explorer</div>
        <div class="panel-logo-sub">Azimuthal Equidistant Projection</div>
      </div>
    </div>
    <button class="panel-close" id="panelClose">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
        <path d="M18 6 6 18M6 6l12 12"/>
      </svg>
    </button>
  </div>

  <nav class="panel-nav">
    <button class="panel-nav-item active" id="navDisc">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
        <ellipse cx="12" cy="12" rx="10" ry="3.5"/><ellipse cx="12" cy="12" rx="10" ry="10"/>
        <line x1="2" y1="12" x2="22" y2="12"/>
      </svg>
      <span>Disc View</span>
    </button>
    <button class="panel-nav-item" id="navStreet">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
        <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z"/><circle cx="12" cy="9" r="2.5"/>
      </svg>
      <span>Street View</span>
    </button>
  </nav>

  <div class="panel-section">
    <div class="panel-section-title">Layers</div>
    <label class="toggle-row" id="rowSatellite">
      <span class="toggle-label">Satellite imagery</span>
      <div class="toggle active" id="toggleSatellite"><div class="toggle-thumb"></div></div>
    </label>
    <label class="toggle-row" id="rowNight">
      <span class="toggle-label">Night mode</span>
      <div class="toggle" id="toggleNight"><div class="toggle-thumb"></div></div>
    </label>
    <label class="toggle-row" id="rowIce">
      <span class="toggle-label">Ice wall labels</span>
      <div class="toggle active" id="toggleIce"><div class="toggle-thumb"></div></div>
    </label>
    <label class="toggle-row" id="rowWaterfall">
      <span class="toggle-label">Waterfall animation</span>
      <div class="toggle active" id="toggleWaterfall"><div class="toggle-thumb"></div></div>
    </label>
  </div>

  <div class="panel-section">
    <div class="panel-section-title">Projection info</div>
    <div class="panel-info-card">
      <div class="info-card-row"><span class="info-label">Model</span><span class="info-val">Flat disc</span></div>
      <div class="info-card-row"><span class="info-label">Projection</span><span class="info-val">Azimuthal Equidistant</span></div>
      <div class="info-card-row"><span class="info-label">Centre</span><span class="info-val">North Pole</span></div>
      <div class="info-card-row"><span class="info-label">Edge</span><span class="info-val">Antarctica Ice Wall</span></div>
      <div class="info-card-row"><span class="info-label">Disc radius</span><span class="info-val">~20,000 km</span></div>
    </div>
  </div>

  <div class="panel-disclaimer">
    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="flex-shrink:0;margin-top:1px">
      <path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/>
    </svg>
    Satirical flat earth viewer. Earth is, in fact, an oblate spheroid.
  </div>
</div>
<div id="panelOverlay"></div>

<!-- RIGHT TOOLBAR -->
<div id="rightToolbar">
  <button class="tool-btn" id="btnReset" title="Reset view">
    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
      <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/>
    </svg>
  </button>
  <div class="tool-divider"></div>
  <button class="tool-btn" id="zoomIn" title="Zoom in">
    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
      <line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/>
    </svg>
  </button>
  <button class="tool-btn" id="zoomOut" title="Zoom out">
    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
      <line x1="5" y1="12" x2="19" y2="12"/>
    </svg>
  </button>
  <div class="tool-divider"></div>
  <button class="tool-btn compass-btn" id="btnCompass" title="Reset north">
    <svg width="22" height="22" viewBox="0 0 24 24">
      <polygon points="12,3 14.5,10 12,9 9.5,10" fill="#e74c3c"/>
      <polygon points="12,21 14.5,14 12,15 9.5,14" fill="#94a3b8"/>
      <circle cx="12" cy="12" r="1.5" fill="#e2e8f0"/>
    </svg>
  </button>
</div>

<!-- BOTTOM STATUS BAR -->
<div id="statusBar">
  <div class="status-left">
    <span id="coordLat">0.000¬∞N</span>
    <span class="status-sep">&nbsp;/&nbsp;</span>
    <span id="coordLon">0.000¬∞E</span>
  </div>
  <div class="status-center">
    <div class="scale-wrap">
      <div class="scale-line" id="scaleLine" style="width:80px"></div>
      <div class="scale-label" id="scaleLabel">1,000 km</div>
    </div>
  </div>
  <div class="status-right">
    <span id="coordAlt">12,756 km</span>
    <span class="status-dot">¬∑</span>
    <span class="status-brand">Flat Earth Explorer</span>
  </div>
</div>

<!-- ICE WALL TOAST -->
<div id="iceToast" class="toast hidden">
  <div class="toast-icon">üßä</div>
  <div class="toast-body">
    <strong>Antarctic Ice Wall</strong>
    <span>Approaching the edge of the disc</span>
  </div>
</div>

<!-- DOUBLE-CLICK HINT (fades after first use) -->
<div id="hintToast" class="toast hint-toast">
  <div class="toast-icon">üëÜ</div>
  <div class="toast-body">
    <strong>Tip</strong>
    <span>Double-click anywhere to open Street View</span>
  </div>
</div>

<!-- STREET VIEW OVERLAY -->
<div id="streetOverlay" class="hidden">
  <div id="streetMap"></div>
  <div id="streetTopBar">
    <div class="street-info">
      <div class="street-coords" id="streetCoords">Street View</div>
    </div>
    <button id="closeStreet">
      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round">
        <path d="M18 6 6 18M6 6l12 12"/>
      </svg>
      Exit Street View
    </button>
  </div>
</div>

<script src="config.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script src="app.js"></script>
</body>
</html>
